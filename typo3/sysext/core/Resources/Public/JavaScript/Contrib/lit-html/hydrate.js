define(["exports","./lit-html","./directive","./directive-helpers"],(function(exports,litHtml,directive,directiveHelpers){"use strict";
/**
	 * @license
	 * Copyright 2019 Google LLC
	 * SPDX-License-Identifier: BSD-3-Clause
	 */const{tt:l,it:a,st:s,et:c,rt:p,lt:f,ht:d}=litHtml._Î£,m=(t,r,i,p)=>{let f,d;if(0===i.length)d=new c(r,null,void 0,p),f=t;else{const e=i[i.length-1];if("template-instance"===e.type)d=new c(r,null,e.instance,p),e.instance.l.push(d),f=e.result.values[e.instancePartIndex++],e.templatePartIndex++;else if("iterable"===e.type){d=new c(r,null,e.part,p);const t=e.iterator.next();if(t.done)throw f=void 0,e.done=!0,Error("Unhandled shorter than expected iterable");f=t.value,e.part.H.push(d)}else d=new c(r,null,e.part,p)}if(f=s(d,f),f===litHtml.noChange)i.push({part:d,type:"leaf"});else if(directiveHelpers.isPrimitive(f))i.push({part:d,type:"leaf"}),d.H=f;else if(directiveHelpers.isTemplateResult(f)){const e="lit-part "+v(f);if(r.data!==e)throw Error("Hydration value mismatch: Unexpected TemplateResult rendered to part");{const e=c.prototype.C(f),t=new l(e,d);i.push({type:"template-instance",instance:t,part:d,templatePartIndex:0,instancePartIndex:0,result:f}),d.H=t}}else a(f)?(i.push({part:d,type:"iterable",value:f,iterator:f[Symbol.iterator](),done:!1}),d.H=[]):(i.push({part:d,type:"leaf"}),d.H=null==f?"":f);return d},u=(e,t,r)=>{if(void 0===t)throw Error("unbalanced part marker");t.B=e;const n=r.pop();if("iterable"===n.type&&!n.iterator.next().done)throw Error("unexpected longer than expected iterable");if(r.length>0)return r[r.length-1].part},w=(e,t,n)=>{const o=/lit-bindings (\d+)/.exec(e.data),l=parseInt(o[1]),a=t[t.length-1];if("template-instance"!==a.type)throw Error("internal error");{const t=a.instance;let o=!1;for(;;){const c=t.D.parts[a.templatePartIndex];if(void 0===c||c.type!==directive.PartType.ATTRIBUTE&&c.type!==directive.PartType.ELEMENT||c.index!==l)break;if(o=!0,c.type===directive.PartType.ATTRIBUTE){const r=new c.ctor(e.parentElement,c.name,c.strings,a.instance,n),o=directiveHelpers.isSingleExpression(r)?a.result.values[a.instancePartIndex]:a.result.values,l=!(r instanceof p||r instanceof f);r.I(o,r,a.instancePartIndex,l),a.instancePartIndex+=c.strings.length-1,t.l.push(r)}else{const r=new d(e.parentElement,a.instance,n);s(r,a.result.values[a.instancePartIndex++]),t.l.push(r)}a.templatePartIndex++}if(!o)throw Error("internal error")}},v=e=>{const t=new Uint32Array(2).fill(5381);for(const r of e.strings)for(let e=0;e<r.length;e++)t[e%2]=33*t[e%2]^r.charCodeAt(e);return btoa(String.fromCharCode(...new Uint8Array(t.buffer)))};exports.digestForTemplateResult=v,exports.hydrate=(e,t,r={})=>{if(void 0!==t._$litPart$)throw Error("container already contains a live render");let n,o;const i=[],l=document.createTreeWalker(t,NodeFilter.SHOW_COMMENT,null,!1);let a;for(;null!==(a=l.nextNode());){const t=a.data;if(t.startsWith("lit-part")){if(0===i.length&&void 0!==n)throw Error("there must be only one root part per container");o=m(e,a,i,r),null!=n||(n=o)}else if(t.startsWith("lit-bindings"))w(a,i,r);else if(t.startsWith("/lit-part")){if(1===i.length&&o!==n)throw Error("internal error");o=u(a,o,i)}}console.assert(void 0!==n,"there should be exactly one root part in a render container"),t._$litPart$=n},Object.defineProperty(exports,"__esModule",{value:!0})}));
