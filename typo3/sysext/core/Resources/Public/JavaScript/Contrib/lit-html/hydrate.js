define(["exports","./lit-html","./directive","./directive-helpers"],(function(e,t,r,n){"use strict";
/**
   * @license
   * Copyright (c) 2019 The Polymer Project Authors. All rights reserved.
   * This code may only be used under the BSD style license found at
   * http://polymer.github.io/LICENSE.txt
   * The complete set of authors may be found at
   * http://polymer.github.io/AUTHORS.txt
   * The complete set of contributors may be found at
   * http://polymer.github.io/CONTRIBUTORS.txt
   * Code distributed by Google as part of the polymer project is also
   * subject to an additional IP rights grant found at
   * http://polymer.github.io/PATENTS.txt
   */const{dt:a,ut:i,at:l,ft:o,_t:s,yt:p,$t:d}=t._Î£,c=(e,r,s,p)=>{let d,c;if(0===s.length)c=new o(r,null,void 0,p),d=e;else{const e=s[s.length-1];if("template-instance"===e.type)c=new o(r,null,e.instance,p),e.instance.o.push(c),d=e.result.values[e.instancePartIndex++],e.templatePartIndex++;else if("iterable"===e.type){c=new o(r,null,e.part,p);const t=e.iterator.next();if(t.done)throw d=void 0,e.done=!0,Error("Unhandled shorter than expected iterable");d=t.value,e.part.L.push(c)}else c=new o(r,null,e.part,p)}if(d=l(c,d),d===t.noChange)s.push({part:c,type:"leaf"});else if(n.isPrimitive(d))s.push({part:c,type:"leaf"}),c.L=d;else if(n.isTemplateResult(d)){const e="lit-part "+f(d);if(r.data!==e)throw Error("Hydration value mismatch: Unexpected TemplateResult rendered to part");{const e=o.prototype.F(d.strings,d),t=new a(e,c);s.push({type:"template-instance",instance:t,part:c,templatePartIndex:0,instancePartIndex:0,result:d}),c.L=t}}else i(d)?(s.push({part:c,type:"iterable",value:d,iterator:d[Symbol.iterator](),done:!1}),c.L=[]):(s.push({part:c,type:"leaf"}),c.L=null==d?"":d);return c},h=(e,t,r)=>{if(void 0===t)throw Error("unbalanced part marker");t.E=e;const n=r.pop();if("iterable"===n.type&&!n.iterator.next().done)throw Error("unexpected longer than expected iterable");if(r.length>0)return r[r.length-1].part},u=(e,t,a)=>{const i=/lit-bindings (\d+)/.exec(e.data),o=parseInt(i[1]),c=t[t.length-1];if("template-instance"!==c.type)throw Error("internal error");{const t=c.instance;let i=!1;for(;;){const h=t.G.o[c.templatePartIndex];if(void 0===h||h.h!==r.PartType.ATTRIBUTE&&h.h!==r.PartType.ELEMENT||h.l!==o)break;if(i=!0,h.h===r.PartType.ATTRIBUTE){const r=new h.p(e.parentElement,h.u,h.v,c.instance,a),i=n.isSingleExpression(r)?c.result.values[c.instancePartIndex]:c.result.values,l=!(r instanceof s||r instanceof p);r.M(i,r,c.instancePartIndex,l),c.instancePartIndex+=h.v.length-1,t.o.push(r)}else{const r=new d(e.parentElement,c.instance,a);l(r,c.result.values[c.instancePartIndex++]),t.o.push(r)}c.templatePartIndex++}if(!i)throw Error("internal error")}},f=e=>{const t=new Uint32Array(2).fill(5381);for(const r of e.strings)for(let e=0;e<r.length;e++)t[e%2]=33*t[e%2]^r.charCodeAt(e);return btoa(String.fromCharCode(...new Uint8Array(t.buffer)))};e.digestForTemplateResult=f,e.hydrate=(e,t,r={})=>{if(void 0!==t.t)throw Error("container already contains a live render");let n,a;const i=[],l=document.createTreeWalker(t,NodeFilter.SHOW_COMMENT,null,!1);let o;for(;null!==(o=l.nextNode());){const t=o.data;if(t.startsWith("lit-part")){var s;if(0===i.length&&void 0!==n)throw Error("there must be only one root part per container");a=c(e,o,i,r),null!==(s=n)&&void 0!==s||(n=a)}else if(t.startsWith("lit-bindings"))u(o,i,r);else if(t.startsWith("/lit-part")){if(1===i.length&&a!==n)throw Error("internal error");a=h(o,a,i)}}console.assert(void 0!==n,"there should be exactly one root part in a render container"),t.t=n},Object.defineProperty(e,"__esModule",{value:!0})}));
